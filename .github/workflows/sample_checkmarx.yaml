name: Sample Checkmarx Scan on PR

on:
  pull_request:
    branches:
      - main  # or your branch

permissions:
  checks: write
  pull-requests: write

jobs:
  simulate-checkmarx:
    runs-on: ubuntu-latest

    steps:
      - name: Sample Checkmarx Scan
        run: |
          echo "Simulating Checkmarx Scan for PR #${{ github.event.pull_request.number }}."

      - name: Create PR Comment (Simulating Checkmarx Result)
        uses: peter-evans/create-or-update-comment@v4
        with:
          token: ${{ secrets.CHECKMARX_TOKEN }}  
          issue-number: ${{ github.event.pull_request.number }}
          body: |
            ![Logo](https://cdn.ast.checkmarx.net/integrations/logo/Checkmarx.png)\n**Checkmarx One – Scan Summary & Details** – [65d368c1\\-bf82\\-4e7c\\-9fcf\\-c9c0158aa9be](https://newscorpst.cxone.cloud/projects/03aeeb2f-b235-4075-87fe-ac8e5e32986a/scans?id=65d368c1-bf82-4e7c-9fcf-c9c0158aa9be&branch=newscorp-ghfb%2Ftest-cx-vulnerabilities)\n<!--new issues section--><details><summary><b>New Issues (3)</b></summary>\nCheckmarx found the following issues in this Pull Request\n\nSeverity|Issue|Source File / Package|Checkmarx Insight\n---|---|---|---\n![HIGH](https://cdn.ast.checkmarx.net/integrations/severity/High.png)|Passwords And Secrets \\- Generic Token|/undocumented\\.json: [19970](https://github.com/newscorp-ghfb/reel-screenkit-ios-fork-cx/blob/test-cx-vulnerabilities//docs/api/undocumented.json#L19970)|<details><summary>details</summary>Query to find passwords and secrets in infrastructure code\\.</details>\n![HIGH](https://cdn.ast.checkmarx.net/integrations/severity/High.png)|Passwords And Secrets \\- Generic Token|/BrightcoveFrame\\.json: [11](https://github.com/newscorp-ghfb/reel-screenkit-ios-fork-cx/blob/test-cx-vulnerabilities//docs/json/test/BrightcoveFrame.json#L11)|<details><summary>details</summary>Query to find passwords and secrets in infrastructure code\\.</details>\n![HIGH](https://cdn.ast.checkmarx.net/integrations/severity/High.png)|Passwords And Secrets \\- Generic Token|/undocumented\\.json: [22525](https://github.com/newscorp-ghfb/reel-screenkit-ios-fork-cx/blob/test-cx-vulnerabilities//docs/api/undocumented.json#L22525)|<details><summary>details</summary>Query to find passwords and secrets in infrastructure code\\.</details>\n\n</details>\n\n<!--new issues section--><!--fix issues section--><details><summary><b>Fixed Issues (6)</b></summary>\nGreat job! The following issues were fixed in this Pull Request\n\nSeverity|Issue|Source File / Package\n---|---|---\n![HIGH](https://cdn.ast.checkmarx.net/integrations/severity/High.png)|~~Passwords And Secrets \\- Generic Token~~|/brightcoveframe\\.json: [1](https://github.com/newscorp-ghfb/reel-screenkit-ios-fork-cx/blob/test-cx-vulnerabilities//Doccarchive/ScreenKit.doccarchive/data/documentation/screenkit/brightcoveframe.json#L1)\n![HIGH](https://cdn.ast.checkmarx.net/integrations/severity/High.png)|~~Passwords And Secrets \\- Generic Token~~|/init\\(basedata:publisher:videoidentifier:playlistidentifier:inline:autoplay:adrequesturls:authtoken:\\)\\.json: [1](https://github.com/newscorp-ghfb/reel-screenkit-ios-fork-cx/blob/test-cx-vulnerabilities//Doccarchive/ScreenKit.doccarchive/data/documentation/screenkit/brightcoveframe/init(basedata:publisher:videoidentifier:playlistidentifier:inline:autoplay:adrequesturls:authtoken:).json#L1)\n![HIGH](https://cdn.ast.checkmarx.net/integrations/severity/High.png)|~~[Signed_Memory_Arithmetic](https://newscorpst.cxone.cloud/results/03aeeb2f-b235-4075-87fe-ac8e5e32986a/65d368c1-bf82-4e7c-9fcf-c9c0158aa9be/sast/description/190/3072978480663385635)~~|/ScreenKitExample/Pods/NSLogger/Client/iOS/LoggerClient\\.m: [1150](https://github.com/newscorp-ghfb/reel-screenkit-ios-fork-cx/blob/test-cx-vulnerabilities//ScreenKitExample/Pods/NSLogger/Client/iOS/LoggerClient.m#L1150)\n![LOW](https://cdn.ast.checkmarx.net/integrations/severity/Low.png)|~~[Password_In_Comment](https://newscorpst.cxone.cloud/results/03aeeb2f-b235-4075-87fe-ac8e5e32986a/65d368c1-bf82-4e7c-9fcf-c9c0158aa9be/sast/description/615/17084654208161489393)~~|/ScreenKitExample/Pods/OHHTTPStubs/Sources/OHHTTPStubsSwift/OHHTTPStubsSwift\\.swift: [179](https://github.com/newscorp-ghfb/reel-screenkit-ios-fork-cx/blob/test-cx-vulnerabilities//ScreenKitExample/Pods/OHHTTPStubs/Sources/OHHTTPStubsSwift/OHHTTPStubsSwift.swift#L179)\n![LOW](https://cdn.ast.checkmarx.net/integrations/severity/Low.png)|~~[Password_In_Comment](https://newscorpst.cxone.cloud/results/03aeeb2f-b235-4075-87fe-ac8e5e32986a/65d368c1-bf82-4e7c-9fcf-c9c0158aa9be/sast/description/615/17084654208161489393)~~|/ScreenKitExample/Pods/OHHTTPStubs/Sources/OHHTTPStubsSwift/OHHTTPStubsSwift\\.swift: [179](https://github.com/newscorp-ghfb/reel-screenkit-ios-fork-cx/blob/test-cx-vulnerabilities//ScreenKitExample/Pods/OHHTTPStubs/Sources/OHHTTPStubsSwift/OHHTTPStubsSwift.swift#L179)\n![LOW](https://cdn.ast.checkmarx.net/integrations/severity/Low.png)|~~[Password_In_Comment](https://newscorpst.cxone.cloud/results/03aeeb2f-b235-4075-87fe-ac8e5e32986a/65d368c1-bf82-4e7c-9fcf-c9c0158aa9be/sast/description/615/17084654208161489393)~~|/ScreenKitExample/Pods/CryptoSwift/Sources/CryptoSwift/Scrypt\\.swift: [40](https://github.com/newscorp-ghfb/reel-screenkit-ios-fork-cx/blob/test-cx-vulnerabilities//ScreenKitExample/Pods/CryptoSwift/Sources/CryptoSwift/Scrypt.swift#L40)\n</details>\n\n<!--fix issues section-->
     
